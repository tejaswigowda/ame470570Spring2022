<!doctype html>
<html>
  <head>
    <title> AJAX Example </title>
    <script src='./asyncReq.js'></script>
    <script>
      var jsonObj;
      function start(){
        var hash = location.hash.replace("#","")
        var url = "./makeHTTPReq?url=" + hash;
        loadURL(url, function(resData){
           jsonObj = JSON.parse(resData);
           generateMarkup();
        });
      }

      function generateMarkup()
      {
        var list = jsonObj.feed.results;
        var markup = "";
        for (var i = 0; i < list.length; i++){
          markup += "<button>" + list[i].name + "</button>";
        }

        document.getElementById("itemList").innerHTML  = markup;
      }
    </script>
  </head>
  <body onload='start()'>
    <div id='itemList'> </div>
    <div id='itemDetails'> </div>
   </body>
</html>
